# =============================================================================
# SIGMA Agent System Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# AUTONOMY CONFIGURATION
# -----------------------------------------------------------------------------
# Level 1: Analyze and propose only (manual approval for everything)
# Level 2: Auto-commit to branches, manual PR approval
# Level 3: Fully autonomous (creates and merges PRs based on confidence)
AUTONOMY_LEVEL=1

# Confidence thresholds per autonomy level
LEVEL_1_MIN_CONFIDENCE=0.70  # High bar for proposals
LEVEL_2_MIN_CONFIDENCE=0.80  # Higher for auto-commits
LEVEL_3_MIN_CONFIDENCE=0.90  # Highest for auto-merge

# Execution flags
AUTO_EXECUTE=false           # Enable autonomous execution
AUTO_CREATE_BRANCHES=false   # Auto-create feature branches
AUTO_COMMIT_TO_BRANCH=false  # Auto-commit changes
AUTO_CREATE_PR=false         # Auto-create pull requests
AUTO_MERGE_PR=false          # Auto-merge PRs (Level 3 only)

# -----------------------------------------------------------------------------
# PROJECT CONFIGURATION
# -----------------------------------------------------------------------------
# GitHub repository to work on
GITHUB_REPO_URL=https://github.com/user/project.git
GITHUB_BRANCH=main
GITHUB_TOKEN=ghp_your_github_personal_access_token

# Local workspace for cloning and working
WORKSPACE_DIR=/tmp/sigma-workspace

# -----------------------------------------------------------------------------
# WORKER INTERVALS (seconds)
# -----------------------------------------------------------------------------
ANALYSIS_INTERVAL=300    # Analysis Worker: 5 minutes
DREAM_INTERVAL=240       # Dream Worker: 4 minutes
RECALL_INTERVAL=180      # Recall Worker: 3 minutes
LEARNING_INTERVAL=360    # Learning Worker: 6 minutes
THINK_INTERVAL=480       # Think Worker: 8 minutes

# Dreaming configuration
DREAM_EVOLUTION_RATE=0.15  # 15% of cycles are experimental
EXPERIMENT_CONFIDENCE_THRESHOLD=0.60  # Min confidence to try experiments

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# PostgreSQL connection (source of truth)
DATABASE_URL=postgresql://sigma:sigmapassword@localhost:5432/sigma

# ⚠️ WARNING: NEVER commit actual passwords to git!
# For production, use strong passwords and secret management
POSTGRES_USER=sigma
POSTGRES_PASSWORD=sigmapassword
POSTGRES_DB=sigma

# -----------------------------------------------------------------------------
# VECTOR STORE CONFIGURATION
# -----------------------------------------------------------------------------
# Qdrant vector database for semantic search
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=  # Optional: leave empty for local

# -----------------------------------------------------------------------------
# KNOWLEDGE GRAPH CONFIGURATION
# -----------------------------------------------------------------------------
# Neo4j graph database for code relationships
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=sigmapassword

# Graphiti configuration
GRAPHITI_ENABLED=true
GRAPHITI_DEBUG=false

# -----------------------------------------------------------------------------
# LLM PROVIDER CONFIGURATION
# -----------------------------------------------------------------------------
# Provider: openai, openrouter, or ollama
LLM_PROVIDER=openrouter

# OpenAI Direct (if LLM_PROVIDER=openai)
OPENAI_API_KEY=sk-your-openai-api-key
MODEL=gpt-4o-mini

# OpenRouter (if LLM_PROVIDER=openrouter) - RECOMMENDED
OPENROUTER_API_KEY=sk-or-v1-your-openrouter-api-key
OPENROUTER_MODEL=openai/gpt-4o-mini
OPENAI_BASE_URL=https://openrouter.ai/api/v1

# Ollama (if LLM_PROVIDER=ollama) - Local models
OLLAMA_BASE_URL=http://localhost:11434/v1
OLLAMA_MODEL=llama3.2

# Embeddings (always use OpenAI-compatible endpoint)
EMBEDDING_MODEL=text-embedding-3-small

# -----------------------------------------------------------------------------
# EXTERNAL INTELLIGENCE
# -----------------------------------------------------------------------------
# Context7 MCP for documentation lookup
CONTEXT7_ENABLED=true

# Playwright MCP for web research
PLAYWRIGHT_ENABLED=true

# -----------------------------------------------------------------------------
# EXECUTION ENVIRONMENT
# -----------------------------------------------------------------------------
# Docker configuration for safe code execution
DOCKER_ENABLED=true
DOCKER_REGISTRY=docker.io
DOCKER_IMAGE_PREFIX=sigma-project

# Test execution
AUTO_TEST=true              # Run tests before committing
TEST_TIMEOUT=300            # Test timeout in seconds
MIN_TEST_COVERAGE=0.70      # Minimum coverage threshold

# Build validation
AUTO_BUILD=true             # Run build before committing
BUILD_TIMEOUT=600           # Build timeout in seconds

# -----------------------------------------------------------------------------
# CROSS-PROJECT LEARNING
# -----------------------------------------------------------------------------
# Enable learning from other projects
CROSS_PROJECT_LEARNING=true

# Project similarity thresholds for transfer learning
SIMILARITY_THRESHOLD_LANGUAGE=0.80   # Same language bonus
SIMILARITY_THRESHOLD_FRAMEWORK=0.90  # Same framework bonus
SIMILARITY_THRESHOLD_DOMAIN=0.70     # Same domain bonus

# Pattern transfer settings
MIN_PATTERN_CONFIDENCE=0.75          # Min confidence to transfer patterns
MIN_PATTERN_SUCCESS_COUNT=3          # Min successes before transferring

# -----------------------------------------------------------------------------
# AGENT CONFIGURATION
# -----------------------------------------------------------------------------
# Agent committee composition (comma-separated)
AGENT_COMMITTEE=architect,reviewer,tester,security,optimizer

# Agent-specific settings
ARCHITECT_WEIGHT=1.0
REVIEWER_WEIGHT=1.0
TESTER_WEIGHT=0.9
SECURITY_WEIGHT=1.1
OPTIMIZER_WEIGHT=0.8

# Proposal scoring
PROPOSAL_STAR_THRESHOLD=0.75         # Min score to star proposals
PROPOSAL_MIN_EXPLANATION_LENGTH=180  # Min explanation chars

# -----------------------------------------------------------------------------
# SIGMA CONFIGURATION
# -----------------------------------------------------------------------------
# Application settings
USER_ID=default-user
DEFAULT_APP_ID=sigma-default
LOG_LEVEL=INFO
SQLALCHEMY_ECHO=false

# Feature flags
GIT_INTEGRATION_ENABLED=true
PATTERN_LEARNING_ENABLED=true
RESEARCH_ENGINE_ENABLED=true

# API Server
API_HOST=0.0.0.0
API_PORT=8000

# -----------------------------------------------------------------------------
# SLACK INTEGRATION (Optional)
# -----------------------------------------------------------------------------
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_ENABLED=false

# -----------------------------------------------------------------------------
# DEPLOYMENT CONFIGURATION
# -----------------------------------------------------------------------------
# Environment: development, staging, production
ENVIRONMENT=development

# Cloud provider (if deploying to cloud)
CLOUD_PROVIDER=local  # local, aws, digitalocean

# AWS Configuration (if CLOUD_PROVIDER=aws)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# DigitalOcean Configuration (if CLOUD_PROVIDER=digitalocean)
DO_API_TOKEN=
